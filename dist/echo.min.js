/** 
 * echo.js by Jacob Bloom
 * This software is provided as-is, yadda yadda yadda
 */
!function(){"use strict";var e="browser";if(void 0!==typeof process)try{e=process.stdout.isTTY&&process.stdout.getColorDepth()>=4?"ansi":"off"}catch(e){}var t={colorMode:e,bracketNotationOptional:!0,constructorParensOptional:!0,parensOptional:!0,stringDelimiter:"'",theme:"undefined"!=typeof navigator&&navigator.userAgent.includes("Firefox")?"firefox":"chrome",autoLog:!0,autoLogMinLength:1};function r(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var o=Symbol("ECHO_INTERNALS"),n=Symbol("ECHO_SELF"),a=new Map(Object.entries({undefined:"undefined",null:"null",true:"boolean",false:"boolean",Infinity:"keyword","-Infinity":"keyword",NaN:"keyword"}));function l(e){var r=e.match("\n")?"`":t.stringDelimiter,o=new RegExp(r,"g");return r+e.replace(o,"\\"+r)+r}function i(e){return e[0]&&Array.isArray(e[0])&&Array.isArray(e[0].raw)}function u(e){for(var t=e[0].raw,r=e.slice(1),o={value:"`"+t[0],type:"string"},n=[o],a=0;a<r.length;a++)o.value+="${",n.push.apply(n,f(r[a])),o={value:"}"+t[a+1],type:"string"},n.push(o);return o.value+="`",n}var c=function(e){return{value:e[0],type:"operator"}},p=function(e){return{value:e[0],type:"keyword"}},s=function(){return{value:" ",type:"default"}};function f(e){if(e&&e[n])return $(e[n]);var t=[];switch(typeof e){case"string":t.push({value:l(e),type:"string"});break;case"function":e.name?t.push({value:e.name,type:"variable"}):t.push({value:String(e),type:"default"});break;case"object":if(e){var o=e.__proto__.name||e.constructor.name;Array.isArray(e)?t.push.apply(t,[c(y||(y=r(["["],["["])))].concat(d(e),[c(v||(v=r(["]"],["]"])))])):o&&"Object"!=o?t.push({value:o+" {}",type:"object"}):t.push({value:"{}",type:"object"})}else t.push({value:"null",type:"null"});break;case"bigint":t.push({value:String(e)+"n",type:"number"});break;default:a.has(String(e))?t.push({value:String(e),type:a.get(String(e))}):t.push({value:String(e),type:typeof e})}return t}function d(e){var t=[];return e.forEach((function(o,n){t.push.apply(t,f(o)),n<e.length-1&&t.push(c(g||(g=r([","],[","]))),s())})),t}var y,v,g,b,h,m,k,w,O,_,j,S,x,A,L,N,E,P,M,T,D=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;function $(e){for(var n=e[o].stack,f=[],y=0;y<n.length;y++){var v=y>0?n[y-1].type:"",g=n[y];switch(g.type){case"get":if(f.length){var $=void 0;$=a.has(g.identifier)?{value:g.identifier,type:a.get(g.identifier)}:Number.isNaN(Number(g.identifier))?t.bracketNotationOptional&&D.test(g.identifier)?{value:g.identifier,type:"property"}:{value:l(g.identifier),type:"string"}:{value:g.identifier,type:"number"},t.parensOptional&&"construct"!==v||(f=[c(b||(b=r(["("],["("])))].concat(f,[c(h||(h=r([")"],[")"])))])),f="property"===$.type?f.concat([c(m||(m=r(["."],["."]))),$]):f.concat([c(k||(k=r(["["],["["]))),$,c(w||(w=r(["]"],["]"])))])}else f=[{value:g.identifier,type:"variable"}];break;case"construct":var C=[];t.constructorParensOptional&&!g.args.length||(C=[c(O||(O=r(["("],["("])))].concat(d(g.args),[c(_||(_=r([")"],[")"])))])),f=t.parensOptional&&"apply"!==v?[p(j||(j=r(["new"],["new"]))),s()].concat(f,C):[p(S||(S=r(["new"],["new"]))),s(),c(x||(x=r(["("],["("])))].concat(f,[c(A||(A=r([")"],[")"])))],C);break;case"apply":f=i(g.args)?f.concat(u(g.args)):t.parensOptional&&"construct"!==v?f.concat([c(M||(M=r(["("],["("])))],d(g.args),[c(T||(T=r([")"],[")"])))]):[c(L||(L=r(["("],["("])))].concat(f,[c(N||(N=r([")"],[")"]))),c(E||(E=r(["("],["("])))],d(g.args),[c(P||(P=r([")"],[")"])))])}}return f}var C="[0m",I="[34m",z="[35m",F={chrome:{browser:{keyword:"color: hsl(310, 86%, 36%)",number:"color: hsl(248, 100%, 41%)",string:"color: hsl(1, 80%, 43%)",boolean:"color: hsl(310, 86%, 36%)",object:"color: black",null:"color: hsl(310, 86%, 36%)",undefined:"color: hsl(310, 86%, 36%)",operator:"color: black",variable:"color: black",property:"color: black",default:"color: black"},ansi:{keyword:z,number:I,string:"[31m",boolean:z,object:C,null:z,undefined:z,operator:C,variable:C,property:C,default:C}},firefox:{browser:{keyword:"color: #dd00a9",number:"color: #30a",string:"color: #30a",boolean:"color: #dd00a9",object:"color: black",null:"color: #dd00a9",undefined:"color: #dd00a9",operator:"color: black",variable:"color: #8000d7",property:"color: #085;",default:"color: black"},ansi:{keyword:z,number:I,string:I,boolean:z,object:C,null:z,undefined:z,operator:C,variable:I,property:"[32m",default:C}}};var H=["render","options","then","toString","valueOf","constructor","prototype","__proto__"],R="undefined"!=typeof process?Symbol.for("nodejs.util.inspect.custom"):null,Z={get:function(e,t){return t===n?e:"symbol"==typeof t||H.includes(t)?("options"==t&&(e[o].autoLogDisabled.value=!0),e[t]):(e[o].stack.push({type:"get",identifier:String(t)}),e[o].proxy)},construct:function(e,t){return e[o].stack.push({type:"construct",args:t}),e[o].proxy},apply:function(e,t,r){return e[o].stack.push({type:"apply",args:r}),e[o].proxy}};function U(e){var r=function(){};return r[o]={autoLogDisabled:e,stack:[{type:"get",identifier:"Echo"}],proxy:new Proxy(r,Z)},r.render=function(o){return void 0===o&&(o=!0),o&&(e.value=!0),function(e){var r={tokens:e,plaintext:e.map((function(e){return"string"==typeof e?e:e.value})).join(""),formatted:null};if("off"===t.colorMode)r.formatted=[r.plaintext];else if("browser"===t.colorMode){for(var o=F[t.theme].browser,n="",a=[],l=void 0,i=0,u=e;i<u.length;i++){var c=o[(y=u[i]).type]||o.default;c!==l&&(n+="%c",a.push(c)),n+=y.value.replace(/%/g,"%%"),l=c}r.formatted=[n].concat(a)}else{o=F[t.theme].ansi;for(var p="",s=void 0,f=0,d=e;f<d.length;f++){var y,v=o[(y=d[f]).type]||o.default;v!==s&&(p+=v),p+=y.value,s=v}p+="[0m",r.formatted=[p]}return r}($(r))},r.then=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Promise.prototype.then.apply(Promise.resolve(r.render()),e)},r.toString=function(){return r.render().plaintext},r[Symbol.toPrimitive]=function(){return r.render().plaintext},R&&(r[R]=function(){return r.render(!1).formatted[0]}),r.options=t,delete r.__proto__,delete r.name,delete r.length,r}var Y={value:!1},q=0,B=0,G=[];!function(e,t){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:null;if(null===r)throw new Error("Unable to locate global object");Object.defineProperty(r,e,{get:t})}("Echo",(function(){var e=U(Y);return 0===q&&(Y.value=!1),t.autoLog&&(q++,setTimeout((function(){var r=e.render(!1);r.tokens.length>B&&(B=r.tokens.length,G=r.formatted),0===--q&&(B>=t.autoLogMinLength&&!Y.value&&console.log.apply(console,G),Y.value=!1,B=0,G=[])}),0)),e[o].proxy}))}();
