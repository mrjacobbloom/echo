/** 
 * echo.js by Jacob Bloom
 * This software is provided as-is, yadda yadda yadda
 */
!function(){"use strict";var e="browser";if(void 0!==typeof process)try{e=process.stdout.isTTY&&process.stdout.getColorDepth()>=4?"ansi":"off"}catch(e){}var r={colorMode:e,bracketNotationOptional:!0,constructorParensOptional:!0,parensOptional:!0,stringDelimiter:"'",theme:"undefined"!=typeof navigator&&navigator.userAgent.includes("Firefox")?"firefox":"chrome",autoLog:!0};function t(e,r){return Object.defineProperty?Object.defineProperty(e,"raw",{value:r}):e.raw=r,e}var o=Symbol("ECHO_INTERNALS"),n=Symbol("ECHO_SELF"),a=new Map(Object.entries({undefined:"undefined",null:"null",true:"boolean",false:"boolean",Infinity:"keyword","-Infinity":"keyword",NaN:"keyword"}));function l(e){var t=e.match("\n")?"`":r.stringDelimiter,o=new RegExp(t,"g");return t+e.replace(o,"\\"+t)+t}function i(e){return e[0]&&Array.isArray(e[0])&&Array.isArray(e[0].raw)}function u(e){for(var r=e[0].raw,t=e.slice(1),o={value:"`"+r[0],type:"string"},n=[o],a=0;a<t.length;a++)o.value+="${",n.push.apply(n,f(t[a])),o={value:"}"+r[a+1],type:"string"},n.push(o);return o.value+="`",n}var c=function(e){return{value:e[0],type:"operator"}},p=function(e){return{value:e[0],type:"keyword"}},s=function(){return{value:" ",type:"default"}};function f(e){if(e&&e[n])return $(e[n]);var r=[];switch(typeof e){case"string":r.push({value:l(e),type:"string"});break;case"function":e.name?r.push({value:e.name,type:"variable"}):r.push({value:String(e),type:"default"});break;case"object":if(e){var o=e.__proto__.name||e.constructor.name;Array.isArray(e)?r.push.apply(r,[c(y||(y=t(["["],["["])))].concat(d(e),[c(v||(v=t(["]"],["]"])))])):o&&"Object"!=o?r.push({value:o+" {}",type:"object"}):r.push({value:"{}",type:"object"})}else r.push({value:"null",type:"null"});break;case"bigint":r.push({value:String(e)+"n",type:"number"});break;default:a.has(String(e))?r.push({value:String(e),type:a.get(String(e))}):r.push({value:String(e),type:typeof e})}return r}function d(e){var r=[];return e.forEach((function(o,n){r.push.apply(r,f(o)),n<e.length-1&&r.push(c(b||(b=t([","],[","]))),s())})),r}var y,v,b,g,h,m,k,w,O,_,j,S,x,A,N,E,P,L,T,D,M=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;function $(e){for(var n=e[o].stack,f=[],y=0;y<n.length;y++){var v=y>0?n[y-1].type:"",b=n[y];switch(b.type){case"get":if(f.length){var $=void 0;$=a.has(b.identifier)?{value:b.identifier,type:a.get(b.identifier)}:Number.isNaN(Number(b.identifier))?r.bracketNotationOptional&&M.test(b.identifier)?{value:b.identifier,type:"property"}:{value:l(b.identifier),type:"string"}:{value:b.identifier,type:"number"},r.parensOptional&&"construct"!==v||(f=[c(g||(g=t(["("],["("])))].concat(f,[c(h||(h=t([")"],[")"])))])),f="property"===$.type?f.concat([c(m||(m=t(["."],["."]))),$]):f.concat([c(k||(k=t(["["],["["]))),$,c(w||(w=t(["]"],["]"])))])}else f=[{value:b.identifier,type:"variable"}];break;case"construct":var C=[];r.constructorParensOptional&&!b.args.length||(C=[c(O||(O=t(["("],["("])))].concat(d(b.args),[c(_||(_=t([")"],[")"])))])),f=r.parensOptional&&"apply"!==v?[p(j||(j=t(["new"],["new"]))),s()].concat(f,C):[p(S||(S=t(["new"],["new"]))),s(),c(x||(x=t(["("],["("])))].concat(f,[c(A||(A=t([")"],[")"])))],C);break;case"apply":f=i(b.args)?f.concat(u(b.args)):r.parensOptional&&"construct"!==v?f.concat([c(T||(T=t(["("],["("])))],d(b.args),[c(D||(D=t([")"],[")"])))]):[c(N||(N=t(["("],["("])))].concat(f,[c(E||(E=t([")"],[")"]))),c(P||(P=t(["("],["("])))],d(b.args),[c(L||(L=t([")"],[")"])))])}}return f}var C="[0m",I="[34m",z="[35m",F={chrome:{browser:{keyword:"color: hsl(310, 86%, 36%)",number:"color: hsl(248, 100%, 41%)",string:"color: hsl(1, 80%, 43%)",boolean:"color: hsl(310, 86%, 36%)",object:"color: black",null:"color: hsl(310, 86%, 36%)",undefined:"color: hsl(310, 86%, 36%)",operator:"color: black",variable:"color: black",property:"color: black",default:"color: black"},ansi:{keyword:z,number:I,string:"[31m",boolean:z,object:C,null:z,undefined:z,operator:C,variable:C,property:C,default:C}},firefox:{browser:{keyword:"color: #dd00a9",number:"color: #30a",string:"color: #30a",boolean:"color: #dd00a9",object:"color: black",null:"color: #dd00a9",undefined:"color: #dd00a9",operator:"color: black",variable:"color: #8000d7",property:"color: #085;",default:"color: black"},ansi:{keyword:z,number:I,string:I,boolean:z,object:C,null:z,undefined:z,operator:C,variable:I,property:"[32m",default:C}}};var H=["render","options","then","toString","valueOf","constructor","prototype","__proto__"],R="undefined"!=typeof process?Symbol.for("nodejs.util.inspect.custom"):null,Z={get:function(e,r){return r===n?e:"symbol"==typeof r||H.includes(r)?("options"==r&&(e[o].autoLogDisabled.value=!0),e[r]):(e[o].stack.push({type:"get",identifier:String(r)}),e[o].proxy)},construct:function(e,r){return e[o].stack.push({type:"construct",args:r}),e[o].proxy},apply:function(e,r,t){return e[o].stack.push({type:"apply",args:t}),e[o].proxy}};function U(e){var t=function(){};return t[o]={autoLogDisabled:e,stack:[{type:"get",identifier:"Echo"}],proxy:new Proxy(t,Z)},t.render=function(o){return void 0===o&&(o=!0),o&&(e.value=!0),function(e){var t={tokens:e,plaintext:e.map((function(e){return"string"==typeof e?e:e.value})).join(""),formatted:null};if("off"===r.colorMode)t.formatted=[t.plaintext];else if("browser"===r.colorMode){for(var o=F[r.theme].browser,n="",a=[],l=void 0,i=0,u=e;i<u.length;i++){var c=o[(y=u[i]).type]||o.default;c!==l&&(n+="%c",a.push(c)),n+=y.value.replace(/%/g,"%%"),l=c}t.formatted=[n].concat(a)}else{o=F[r.theme].ansi;for(var p="",s=void 0,f=0,d=e;f<d.length;f++){var y,v=o[(y=d[f]).type]||o.default;v!==s&&(p+=v),p+=y.value,s=v}p+="[0m",t.formatted=[p]}return t}($(t))},t.then=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Promise.prototype.then.apply(Promise.resolve(t.render()),e)},t.toString=function(){return t.render().plaintext},t[Symbol.toPrimitive]=function(){return t.render().plaintext},R&&(t[R]=function(){return t.render(!1).formatted[0]}),t.options=r,delete t.__proto__,delete t.name,delete t.length,t}var Y={value:!1},q=0,B=0,G=[];!function(e,r){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:null;if(null===t)throw new Error("Unable to locate global object");Object.defineProperty(t,e,{get:r})}("Echo",(function(){var e=U(Y);return 0===q&&(Y.value=!1),r.autoLog&&(q++,setTimeout((function(){var r=e.render(!1);r.tokens.length>B&&(B=r.tokens.length,G=r.formatted),0===--q&&(B>0&&!Y.value&&console.log.apply(console,G),Y.value=!1,B=0,G=[])}),0)),e[o].proxy}))}();
